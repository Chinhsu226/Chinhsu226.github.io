<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>少林晋升模拟器 - 真·佛系升职记</title>
    <style>
        /* —— 基础样式 —— */
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            font-family:"KaiTi",serif;
            background:linear-gradient(135deg,#d4af37 0%,#8b7355 100%);
            min-height:100vh;
            padding:20px;
            display:flex;
            align-items:flex-start;
            justify-content:center;
        }
        .container{
            width:100%;
            max-width:800px;
            background:rgba(255,255,255,.9);
            border-radius:20px;
            padding:30px;
            box-shadow:0 10px 30px rgba(0,0,0,.3);
            position:relative;
            overflow:hidden;
        }
        .container::before{
            content:"🙏";
            position:absolute;
            top:-50px;
            right:-50px;
            font-size:200px;
            opacity:.1;
            transform:rotate(15deg);
        }
        h1{
            text-align:center;
            color:#8b4513;
            margin-bottom:30px;
            font-size:2.5em;
            text-shadow:2px 2px 4px rgba(0,0,0,.3);
        }
        p.subtitle{
            text-align:center;
            color:#666;
            margin-bottom:20px;
        }

        /* —— 状态栏 —— */
        .status-bar{
            display:flex;
            justify-content:space-between;
            flex-wrap:wrap;
            gap:10px;
            margin-bottom:20px;
            padding:15px;
            background:#f5f5dc;
            border-radius:10px;
            box-shadow:0 2px 5px rgba(0,0,0,.1);
        }
        .stat{
            text-align:center;
            flex:1 1 120px;
        }
        .stat-label{font-size:.9em;color:#666;}
        .stat-value{font-size:1.5em;font-weight:bold;color:#8b4513;}

        /* —— 腐败进度条 —— */
        .corruption-meter{
            width:100%;
            height:12px;
            background:#e0e0e0;
            border-radius:6px;
            overflow:hidden;
            margin-top:4px;
        }
        .corruption-fill{
            height:100%;
            background:linear-gradient(90deg,#ff6b6b,#ff4757);
            transition:width .5s;
            width:0%;
        }

        /* —— 事件卡片 —— */
        .event-card{
            background:#fff;
            border:2px solid #d4af37;
            border-radius:15px;
            padding:20px;
            margin-bottom:20px;
            animation:slideIn .5s ease-out;
        }
        @keyframes slideIn{
            from{opacity:0;transform:translateX(-50px);}
            to{opacity:1;transform:translateX(0);}
        }
        .event-title{color:#8b4513;font-size:1.3em;font-weight:bold;margin-bottom:10px;}
        .event-description{color:#333;margin-bottom:15px;line-height:1.6;}

        /* —— 选择按钮 —— */
        .choices{display:flex;gap:10px;flex-wrap:wrap;}
        .choice-btn{
            flex:1 1 150px;
            padding:12px 20px;
            border:none;
            border-radius:25px;
            font-size:1em;
            cursor:pointer;
            transition:all .3s;
            font-family:inherit;
        }
        .choice-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,0,0,.2);}
        .choice-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;}
        .positive{background:#90ee90;color:#006400;}
        .negative{background:#ffcccb;color:#8b0000;}
        .neutral{background:#f0e68c;color:#8b4513;}

        /* —— 结果提示 —— */
        .result{
            margin-top:15px;
            padding:15px;
            border-radius:10px;
            font-weight:bold;
            display:none;
            animation:fadeIn .3s;
        }
        @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
        .result.success{background:#d4edda;color:#155724;border:1px solid #c3e6cb;}
        .result.failure{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb;}
        .result.sarcastic{background:#fff3cd;color:#856404;border:1px solid #ffeaa7;font-style:italic;}

        /* —— 成就弹窗 —— */
        .achievement{
            position:fixed;
            top:50%;left:50%;
            transform:translate(-50%,-50%);
            background:#d4af37;
            color:#fff;
            padding:30px 40px;
            border-radius:20px;
            text-align:center;
            box-shadow:0 10px 50px rgba(0,0,0,.5);
            z-index:1000;
            display:none;
            animation:popIn .5s;
        }
        @keyframes popIn{
            0%{transform:translate(-50%,-50%) scale(0);opacity:0;}
            100%{transform:translate(-50%,-50%) scale(1);opacity:1;}
        }
        .close-achievement{
            position:absolute;
            top:10px;right:15px;
            background:none;border:none;
            font-size:2em;cursor:pointer;
            color:#fff;
        }

        /* —— 重新开始按钮 —— */
        .restart-btn{
            display:block;
            margin:20px auto;
            padding:15px 30px;
            background:#8b4513;
            color:#fff;
            border:none;
            border-radius:25px;
            font-size:1.2em;
            cursor:pointer;
            transition:all .3s;
        }
        .restart-btn:hover{background:#a0522d;transform:scale(1.05);}

        /* —— 响应式 —— */
        @media(max-width:600px){
            .container{padding:15px;}
            h1{font-size:2em;}
            .choices{flex-direction:column;}
            .choice-btn{width:100%;}
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧘‍♂️ 少林晋升模拟器 🧘‍♂️</h1>
        <p class="subtitle">“阿弥陀佛，施主与佛有缘，此缘价值8888元”</p>

        <!-- 状态栏 -->
        <div class="status-bar">
            <div class="stat">
                <div class="stat-label">职位</div>
                <div class="stat-value" id="position">扫地僧</div>
            </div>
            <div class="stat">
                <div class="stat-label">功德</div>
                <div class="stat-value" id="merit">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">钱包</div>
                <div class="stat-value" id="money">0元</div>
            </div>
            <div class="stat" style="min-width:120px;">
                <div class="stat-label">腐败值</div>
                <div class="corruption-meter">
                    <div class="corruption-fill" id="corruptionFill"></div>
                </div>
            </div>
        </div>

        <!-- 游戏内容区 -->
        <div id="gameArea"></div>

        <!-- 重新开始 -->
        <button class="restart-btn" id="restartBtn" style="display:none;" onclick="restartGame()">重新出家</button>
    </div>

    <!-- 成就弹窗 -->
    <div class="achievement" id="achievement">
        <button class="close-achievement" onclick="closeAchievement()">×</button>
        <h2 id="achievementTitle"></h2>
        <p id="achievementText"></p>
    </div>

    <script>
        /* ========== 游戏状态 ========== */
        const gameState = {
            position: "扫地僧",
            merit: 0,
            money: 0,
            corruption: 0,
            currentEventIndex: 0,
            achievements: new Set()
        };

        /* ========== 事件数据 ========== */
        const events = [
            {
                title:"扫地时的奇遇",
                description:"你在扫地时发现一枚铜钱，这时方丈路过，和蔼地看着你。",
                choices:[
                    {text:"交给方丈，弘扬拾金不昧美德",effect:{merit:10,money:0,corruption:-5},result:"方丈夸你六根清净，奖励你多扫一个月的地。功德+10"},
                    {text:"偷偷塞进自己腰包，佛祖会原谅的",effect:{merit:-5,money:1,corruption:10},result:"你感觉钱包鼓了一点，但心里有点慌。腐败值+10"},
                    {text:"提议建立功德箱，统一收集香火钱",effect:{merit:20,money:50,corruption:30},result:"方丈欣慰地点头，从此功德箱的钱都经你手。职位提升！"}
                ]
            },
            {
                title:"香火钱风波",
                description:"一位土豪施主捐了100万，要求在大雄宝殿立个二维码功德碑。",
                choices:[
                    {text:"严词拒绝，佛门清净地岂容铜臭",effect:{merit:20,money:0,corruption:-10},result:"土豪转身去了隔壁寺庙，方丈脸色不太好看。功德+20"},
                    {text:"立即答应，并提议加个VIP包厢",effect:{merit:-10,money:50000,corruption:50},result:"土豪很满意，你的瑞士银行账户多了一笔钱。腐败值爆表！"},
                    {text:"建议开设“少林武校”，文武双修",effect:{merit:5,money:10000,corruption:15},result:"方丈觉得你很上道，让你负责招生办。钱包+10000"}
                ]
            },
            {
                title:"国际交流机会",
                description:"美国某财团邀请少林寺进行“商业禅修”交流，包机头等舱。",
                choices:[
                    {text:"坚守寺庙，认为修行不应出国",effect:{merit:15,money:0,corruption:0},result:"你错过了见世面的机会，但保住了初心。功德+15"},
                    {text:"欣然前往，顺便考察海外分寺选址",effect:{merit:0,money:20000,corruption:25},result:"你在硅谷买了块地，准备建“禅意共享办公室”。钱包+20000"},
                    {text:"带上全寺直播，开启“云修行”模式",effect:{merit:-5,money:100000,corruption:40},result:"直播间礼物刷爆，方丈给你升了首座。腐败值+40"}
                ]
            },
            {
                title:"方丈的考验",
                description:"方丈问：“何为佛法？”，同时暗示回答得好可以升监院。",
                choices:[
                    {text:"一切有为法，如梦幻泡影",effect:{merit:30,money:0,corruption:0},result:"方丈点头，但说你还不够入世，继续扫地。功德+30"},
                    {text:"佛法就是流量密码，阿弥陀佛么么哒",effect:{merit:-20,money:5000,corruption:35},result:"方丈大笑三声，拍着你的肩膀说“孺子可教”。职位直升监院！"},
                    {text:"佛法就是商业模式，施主就是我们的衣食父母",effect:{merit:-30,money:20000,corruption:60},result:"方丈激动得把你升为CEO，负责全寺IPO。腐败值+60"}
                ]
            },
            {
                title:"上市前夜",
                description:"少林寺准备上市，需要你决定发行价。方丈暗示“出家人不打诳语，但可以四舍五入”。",
                choices:[
                    {text:"坚持佛法无价，拒绝上市",effect:{merit:50,money:0,corruption:-20},result:"你被董事会投票出局，回到扫地岗位。但功德圆满！"},
                    {text:"定价9999元/股，图个吉利",effect:{merit:-10,money:1000000,corruption:80},result:"上市首日涨停，你成了亿万富豪。恭喜获得“真·佛系”成就！"},
                    {text:"连夜发布“区块链+禅修”白皮书，定价99999元/股",effect:{merit:-100,money:10000000,corruption:100},result:"纳斯达克敲钟成功！你成了董事会主席，少林寺改名“少林集团”。终极腐败！"}
                ]
            }
        ];

        /* ========== 初始化 ========== */
        function initGame(){
            Object.assign(gameState,{
                position:"扫地僧",
                merit:0,
                money:0,
                corruption:0,
                currentEventIndex:0,
                achievements:new Set()
            });
            updateUI();
            renderEvent();
        }

        /* ========== UI 更新 ========== */
        function updateUI(){
            document.getElementById('position').textContent = gameState.position;
            document.getElementById('merit').textContent = gameState.merit;
            document.getElementById('money').textContent = gameState.money.toLocaleString() + '元';
            document.getElementById('corruptionFill').style.width = gameState.corruption + '%';
        }

        /* ========== 渲染当前事件 ========== */
        function renderEvent(){
            if(gameState.currentEventIndex >= events.length){
                renderEnding();
                return;
            }
            const ev = events[gameState.currentEventIndex];
            const html = `
                <div class="event-card">
                    <div class="event-title">${ev.title}</div>
                    <div class="event-description">${ev.description}</div>
                    <div class="choices">
                        ${ev.choices.map((c,i)=>`
                            <button class="choice-btn ${['positive','negative','neutral'][i]}" onclick="handleChoice(${i})">${c.text}</button>
                        `).join('')}
                    </div>
                    <div class="result" id="result"></div>
                </div>
            `;
            document.getElementById('gameArea').innerHTML = html;
        }

        /* ========== 处理选择 ========== */
        function handleChoice(idx){
            const {choices,effect,result} = events[gameState.currentEventIndex].choices[idx];
            // 更新数值
            ['merit','money','corruption'].forEach(k=>{
                if(effect[k]) gameState[k] += effect[k];
            });
            gameState.corruption = Math.max(0,Math.min(100,gameState.corruption));
            // 更新职位
            updatePosition();
            // 显示结果
            const res = document.getElementById('result');
            res.textContent = result;
            res.className = 'result ' + (effect.corruption>20?'sarcastic':effect.merit>0?'success':'failure');
            res.style.display='block';
            // 禁用按钮
            document.querySelectorAll('.choice-btn').forEach(b=>b.disabled=true);
            // 下一事件
            setTimeout(()=>{
                gameState.currentEventIndex++;
                updateUI();
                renderEvent();
            },1800);
            // 成就
            checkAchievements();
        }

        /* ========== 职位升级逻辑 ========== */
        function updatePosition(){
            if(gameState.corruption>=100) gameState.position='董事会主席';
            else if(gameState.corruption>=80) gameState.position='CEO';
            else if(gameState.corruption>=60) gameState.position='方丈';
            else if(gameState.corruption>=40) gameState.position='首座';
            else if(gameState.corruption>=20) gameState.position='监院';
            else if(gameState.corruption>=10) gameState.position='知客僧';
            else if(gameState.merit>=50) gameState.position='撞钟僧';
            else gameState.position='扫地僧';
        }

        /* ========== 成就系统 ========== */
        function checkAchievements(){
            if(gameState.money>=1e6 && !gameState.achievements.has('M')){
                popAch('💰 真·佛系富豪','恭喜！你成功把佛门清净地变成了财富密码！');
                gameState.achievements.add('M');
            }
            if(gameState.corruption>=100 && !gameState.achievements.has('C')){
                popAch('🙏 功德无量CEO','少林寺上市成功！佛祖看了都沉默...');
                gameState.achievements.add('C');
            }
            if(gameState.merit>=100 && !gameState.achievements.has('S')){
                popAch('✨ 扫地僧之魂','你守住了初心，但错过了几个亿...');
                gameState.achievements.add('S');
            }
        }
        function popAch(title,txt){
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementText').textContent = txt;
            document.getElementById('achievement').style.display='block';
        }
        function closeAchievement(){
            document.getElementById('achievement').style.display='none';
        }

        /* ========== 结局 ========== */
        function renderEnding(){
            let endMsg='';
            if(gameState.corruption>=80){
                endMsg=`最终职位：${gameState.position}<br>总资产：${gameState.money.toLocaleString()}元<br><br>你把千年古刹成功转型为商业帝国，纳斯达克为你敲钟！`;
            }else if(gameState.merit>=50){
                endMsg=`最终职位：${gameState.position}<br>总功德：${gameState.merit}<br><br>你守住了出家人的本分，方丈却说：“下次记得带钱包出家。”`;
            }else{
                endMsg=`最终职位：${gameState.position}<br>既没大富大贵，也没大彻大悟。<br><br>方丈拍拍你：“施主，办张年卡？”`;
            }
            document.getElementById('gameArea').innerHTML = `
                <div class="event-card">
                    <div class="event-title">🎬 游戏结束</div>
                    <div class="event-description">${endMsg}</div>
                </div>
            `;
            document.getElementById('restartBtn').style.display='block';
        }

        /* ========== 重新开始 ========== */
        function restartGame(){
            document.getElementById('restartBtn').style.display='none';
            initGame();
        }

        /* ========== 启动 ========== */
        initGame();
    </script>
</body>
</html>